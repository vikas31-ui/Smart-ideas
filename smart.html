<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Black Hole Zoom - Smirity</title>
  <style>
    body { margin: 0; overflow: hidden; background: black; }
    canvas { display: block; }
  </style>
</head>
<body>
  <script type="module">
    import * as THREE from 'https://cdn.skypack.dev/three@0.158.0';
    import { EffectComposer } from 'https://cdn.skypack.dev/three/examples/jsm/postprocessing/EffectComposer.js';
    import { RenderPass } from 'https://cdn.skypack.dev/three/examples/jsm/postprocessing/RenderPass.js';
    import { UnrealBloomPass } from 'https://cdn.skypack.dev/three/examples/jsm/postprocessing/UnrealBloomPass.js';

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);

    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100);
    camera.position.z = 10;

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Postprocessing - Bloom
    const composer = new EffectComposer(renderer);
    const renderPass = new RenderPass(scene, camera);
    const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
    bloomPass.threshold = 0;
    bloomPass.strength = 1.5;
    bloomPass.radius = 0.5;
    composer.addPass(renderPass);
    composer.addPass(bloomPass);

    // Lighting
    const ambientLight = new THREE.AmbientLight(0x4444ff, 0.8);
    scene.add(ambientLight);
    const pointLight = new THREE.PointLight(0x88ccff, 1);
    pointLight.position.set(5, 5, 5);
    scene.add(pointLight);

    // Logo approximation
    const logoGroup = new THREE.Group();
    const material = new THREE.MeshStandardMaterial({ color: 0x00ccff, metalness: 0.5, roughness: 0.3 });
    const diamond1 = new THREE.BoxGeometry(3, 3, 0.3);
    const diamond2 = new THREE.BoxGeometry(2.4, 2.4, 0.3);
    const diamond3 = new THREE.BoxGeometry(1.8, 1.8, 0.3);
    const mesh1 = new THREE.Mesh(diamond1, material);
    const mesh2 = new THREE.Mesh(diamond2, material);
    const mesh3 = new THREE.Mesh(diamond3, material);
    mesh2.position.z = 0.4;
    mesh3.position.z = 0.8;
    logoGroup.add(mesh1);
    logoGroup.add(mesh2);
    logoGroup.add(mesh3);
    scene.add(logoGroup);

    // Star field
    const starGeometry = new THREE.BufferGeometry();
    const starCount = 1000;
    const starPositions = new Float32Array(starCount * 3);
    for (let i = 0; i < starCount * 3; i++) {
      starPositions[i] = (Math.random() - 0.5) * 200;
    }
    starGeometry.setAttribute('position', new THREE.BufferAttribute(starPositions, 3));
    const starMaterial = new THREE.PointsMaterial({ color: 0xffffff });
    const stars = new THREE.Points(starGeometry, starMaterial);
    scene.add(stars);

    // Glowing cube
    const cubeGeometry = new THREE.BoxGeometry(1, 1, 1);
    const cubeMaterial = new THREE.MeshStandardMaterial({ color: 0x00ffff, emissive: 0x0099ff, emissiveIntensity: 1 });
    const glowingCube = new THREE.Mesh(cubeGeometry, cubeMaterial);
    glowingCube.visible = false;
    scene.add(glowingCube);

    // Nano particles
    const nanoGroup = new THREE.Group();
    const nanoMaterial = new THREE.MeshStandardMaterial({ color: 0xffffff, emissive: 0x00ffff, emissiveIntensity: 1 });
    const nanoParticles = [];
    const numParticles = 50;
    for (let i = 0; i < numParticles; i++) {
      const sphere = new THREE.Mesh(new THREE.SphereGeometry(0.05, 8, 8), nanoMaterial);
      const angle = Math.random() * Math.PI * 2;
      const radius = 1.5 + Math.random();
      sphere.userData = {
        angle,
        radius,
        speed: 0.01 + Math.random() * 0.02,
        zPhase: Math.random() * Math.PI * 2,
      };
      sphere.position.set(
        Math.cos(angle) * radius,
        Math.sin(angle) * radius,
        Math.sin(sphere.userData.zPhase) * 0.4
      );
      nanoGroup.add(sphere);
      nanoParticles.push(sphere);
    }
    nanoGroup.visible = false;
    scene.add(nanoGroup);

    let time = 0;

    // Animate
    function animate() {
      requestAnimationFrame(animate);
      time += 0.01;

      // Rotate logo
      logoGroup.rotation.z += 0.002;
      logoGroup.rotation.x += 0.001;

      // Zoom in transition
      if (camera.position.z > 2) {
        camera.position.z -= 0.02;
      } else {
        logoGroup.visible = false;
        glowingCube.visible = true;
        nanoGroup.visible = true;
        glowingCube.rotation.y += 0.01;
        glowingCube.rotation.x += 0.005;

        // Animate nano particles
        nanoParticles.forEach(p => {
          p.userData.angle += p.userData.speed;
          const r = p.userData.radius;
          p.position.x = Math.cos(p.userData.angle) * r;
          p.position.y = Math.sin(p.userData.angle) * r;
          p.position.z = Math.sin(time + p.userData.zPhase) * 0.4;
        });

        // Pulse glow
        nanoMaterial.emissiveIntensity = 1 + Math.sin(time * 3) * 0.5;
      }

      composer.render();
    }
    animate();

    // Resize
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      composer.setSize(window.innerWidth, window.innerHeight);
    });

    // Click to navigate
    window.addEventListener('click', () => {
      if (glowingCube.visible) {
        window.location.href = '/idea-sharing.html';
      }
    });
  </script>
</body>
</html>
